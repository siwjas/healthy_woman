<div class="container mx-auto px-4 py-8">
    <h1 class="text-3xl font-bold text-center text-pink-800 mb-8">Calculadora de Ciclo Menstrual</h1>
    
    <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden mb-8">
      <div class="p-6">
        <h2 class="text-xl font-bold text-gray-800 mb-4">Acompanhe seu ciclo menstrual</h2>
        <p class="text-gray-600 mb-6">Informe a data do seu último período e a duração média do seu ciclo para calcular sua janela fértil e próxima menstruação.</p>
        
        <%= form_with model: @menstrual_cycle_calculator, url: calculators_menstrual_cycle_calculate_path, local: true do |f| %>
          <div class="mb-4">
            <%= f.label :last_period_date, "Data do último período", class: "block text-gray-700 font-medium mb-2" %>
            <%= f.date_field :last_period_date, class: "shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" %>
          </div>
          
          <div class="mb-4">
            <%= f.label :cycle_length, "Duração do ciclo (dias)", class: "block text-gray-700 font-medium mb-2" %>
            <%= f.number_field :cycle_length, min: 21, max: 35, value: 28, class: "shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" %>
            <p class="text-xs text-gray-500 mt-1">A duração média de um ciclo menstrual é de 28 dias, mas pode variar entre 21 e 35 dias.</p>
          </div>
          
          <div class="flex justify-center">
            <%= f.submit "Calcular", class: "bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-6 rounded-lg focus:outline-none focus:shadow-outline transition duration-150 ease-in-out" %>
          </div>
        <% end %>
      </div>
    </div>
    
    <% if @last_calculation.present? %>
      <div class="max-w-2xl mx-auto bg-white rounded-lg shadow-lg overflow-hidden">
        <div class="bg-pink-600 px-6 py-4">
          <h2 class="text-xl font-bold text-white">Seu último cálculo</h2>
          <p class="text-pink-200 text-sm">Realizado em <%= @last_calculation[:created_at] %></p>
        </div>
        <div class="p-6">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-pink-50 rounded-lg p-4">
              <h3 class="text-sm font-medium text-pink-800 mb-1">Último período</h3>
              <p class="text-lg font-bold text-gray-800"><%= @last_calculation[:last_period_date] %></p>
            </div>
            
            <div class="bg-pink-50 rounded-lg p-4">
              <h3 class="text-sm font-medium text-pink-800 mb-1">Duração do ciclo</h3>
              <p class="text-lg font-bold text-gray-800"><%= @last_calculation[:cycle_length] %> dias</p>
            </div>
            
            <div class="bg-pink-50 rounded-lg p-4">
              <h3 class="text-sm font-medium text-pink-800 mb-1">Próximo período</h3>
              <p class="text-lg font-bold text-gray-800"><%= @last_calculation[:next_period_date] %></p>
            </div>
            
            <div class="bg-pink-50 rounded-lg p-4">
              <h3 class="text-sm font-medium text-pink-800 mb-1">Data de ovulação</h3>
              <p class="text-lg font-bold text-gray-800"><%= @last_calculation[:ovulation_date] %></p>
            </div>
          </div>
          
          <div class="mt-6 bg-pink-50 rounded-lg p-4">
            <h3 class="text-sm font-medium text-pink-800 mb-1">Janela fértil</h3>
            <p class="text-lg font-bold text-gray-800">
              De <%= @last_calculation[:fertility_window_start] %> 
              até <%= @last_calculation[:fertility_window_end] %>
            </p>
          </div>
          
          <div class="mt-6 text-center">
            <p class="text-gray-600 mb-4">Para acessar seu histórico completo de ciclos e receber lembretes:</p>
            <div class="flex justify-center space-x-4">
              <%= link_to "Entrar", new_user_session_path, class: "bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded-lg" %>
              <%= link_to "Criar conta", new_user_registration_path, class: "bg-white hover:bg-gray-100 text-pink-600 font-bold py-2 px-4 rounded-lg border border-pink-600" %>
            </div>
          </div>
        </div>
      </div>
    <% end %>
    
    <div class="mt-8 text-center">
      <%= link_to "Voltar para a página inicial", root_path, class: "text-pink-600 hover:text-pink-800" %>
    </div>
</div>
